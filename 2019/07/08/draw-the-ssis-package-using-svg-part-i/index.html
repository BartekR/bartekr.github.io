<!DOCTYPE html>
<html lang="en-gb" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="For one of my projects, I need to draw the content of an SSIS package. It should not be a big problem, as the file contains all the required information. If you need to do something similar - I write a series of posts on how to achieve it using SVG, XSLT transformations and a bit of PowerShell (and maybe something more along the way). All the code is available on GitHub.">
<title>Draw the SSIS package using SVG - part I</title>

<link rel='canonical' href='https://blog.bartekr.net/2019/07/08/draw-the-ssis-package-using-svg-part-i/'>

<link rel="stylesheet" href="/scss/style.min.e8c7fca7d1c9294aa7a4f3426c225ee26540f7d94e39be0b5a4a5c8a49ca5a25.css"><meta property='og:title' content="Draw the SSIS package using SVG - part I">
<meta property='og:description' content="For one of my projects, I need to draw the content of an SSIS package. It should not be a big problem, as the file contains all the required information. If you need to do something similar - I write a series of posts on how to achieve it using SVG, XSLT transformations and a bit of PowerShell (and maybe something more along the way). All the code is available on GitHub.">
<meta property='og:url' content='https://blog.bartekr.net/2019/07/08/draw-the-ssis-package-using-svg-part-i/'>
<meta property='og:site_name' content='BartekR'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='SSIS' /><meta property='article:tag' content='SVG' /><meta property='article:tag' content='XML' /><meta property='article:tag' content='XSLT' /><meta property='article:published_time' content='2019-07-08T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2019-07-08T00:00:00&#43;00:00'/><meta property='og:image' content='https://blog.bartekr.net/2019/07/08/draw-the-ssis-package-using-svg-part-i/images/DTS_DesignTimeProperties.png' />
<meta name="twitter:title" content="Draw the SSIS package using SVG - part I">
<meta name="twitter:description" content="For one of my projects, I need to draw the content of an SSIS package. It should not be a big problem, as the file contains all the required information. If you need to do something similar - I write a series of posts on how to achieve it using SVG, XSLT transformations and a bit of PowerShell (and maybe something more along the way). All the code is available on GitHub."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://blog.bartekr.net/2019/07/08/draw-the-ssis-package-using-svg-part-i/images/DTS_DesignTimeProperties.png' />
    <link rel="shortcut icon" href="/favicon.ico" />

  

<style>
     
    :root {
         
        --base-font-family: "Roboto", "Lato", var(--sys-font-family), var(--zh-font-family), sans-serif;
    }
</style>

<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap";
    
        customFont.type = "text/css";
        customFont.rel = "stylesheet";
    
        document.head.appendChild(customFont);
    }());
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky compact">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/Bartek_SqlSatOslo2019_100x100_huc95037055e21b687f52ff80813407d9d_14060_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">BartekR</a></h1>
            <p class="site-description">Azure. PowerShell. SQL. DevOps.<br />1 wife. 1 kid. 4 dogs. 5 cats.</p>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/BartekR'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://x.com/b_ratajczyk'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about' >
                
                
                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://brinf.wordpress.com' >
                
                
                
                <span>Old blog [PL]</span>
            </a>
        </li>
        
        
        <li >
            <a href='/series' >
                
                
                
                <span>Series</span>
            </a>
        </li>
        
        
        <li >
            <a href='/books' >
                
                
                
                <span>Books</span>
            </a>
        </li>
        
        
        <li >
            <a href='/speaking' >
                
                
                
                <span>Speaking</span>
            </a>
        </li>
        
        
        <li >
            <a href='/categories' >
                
                
                
                <span>Categories</span>
            </a>
        </li>
        
        
        <li >
            <a href='/tags' >
                
                
                
                <span>Tags</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search' >
                
                
                
                <span>Search</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#the-setup">The setup</a></li>
    <li><a href="#the-beginnings">The beginnings</a></li>
    <li><a href="#the-next-step">The next step</a></li>
    <li><a href="#the-drawing">The drawing</a></li>
    <li><a href="#the-result">The result</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/2019/07/08/draw-the-ssis-package-using-svg-part-i/">
                
                    <img src="/2019/07/08/draw-the-ssis-package-using-svg-part-i/images/DTS_DesignTimeProperties.png" loading="lazy" alt="Featured image of post Draw the SSIS package using SVG - part I" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/learning/" >
                Learning
            </a>
        
            <a href="/categories/series/" >
                Series
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/2019/07/08/draw-the-ssis-package-using-svg-part-i/">Draw the SSIS package using SVG - part I</a>
        </h2>
    
        

        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jul 08, 2019</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    9 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>For one of my projects, I need to draw the content of an SSIS package. It should not be a big problem, as the file contains all the required information. If you need to do something similar - I write a series of posts on how to achieve it using SVG, XSLT transformations and a bit of PowerShell (and maybe something more along the way). All the code <a class="link" href="https://github.com/BartekR/blog/tree/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I"  target="_blank" rel="noopener"
    >is available on GitHub</a>.</p>
<h2 id="the-setup">The setup
</h2><p>I start with the sample package as on the picture. It has three elements aligned vertically, with <code>AND</code> precedence constraints, evaluated as <em>Success</em>. It also has a small annotation on the side.</p>
<p><a class="link" href="images/SSISPackage.png" >
  
  <p style="text-align: center;">
    <img src="images/SSISPackage.png"
	
	
	
	loading="lazy"
	
		alt="Sample SSIS package"
	
	
>
  </p>

</a></p>
<p>The part responsible for the layout is the tag<code>&lt;DTS:DesignTimeProperties&gt;</code> at the end of the XML, that stores the data as a <code>CDATA</code> section.</p>
<p><a class="link" href="images/DTS_DesignTimeProperties.png" >
  
  <p style="text-align: center;">
    <img src="images/DTS_DesignTimeProperties.png"
	
	
	
	loading="lazy"
	
		alt="DTS:DesignTimeProperties"
	
	
>
  </p>

</a></p>
<p>For a start, it&rsquo;s enough to save its content to a separate XML file named <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/PackageLayout.xml"  target="_blank" rel="noopener"
    >PackageLayout.xml</a> and take only one part of it containing the <code>&lt;Package&gt;</code> element and save as <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/Beginning.xml"  target="_blank" rel="noopener"
    >Beginning.xml</a>.</p>
<p>The last thing is to have some XSLT processor. I use <a class="link" href="http://www.saxonica.com/welcome/welcome.xml"  target="_blank" rel="noopener"
    >Saxon</a> for years, and for the demos, I use the Saxon HE 9.9 .NET version. I will use some of the features of XSLT 2.0, so I skip the XSLT processing used in the browsers as they don&rsquo;t support it.</p>
<p>To run the XSLT transformation, I use <code>Transform.exe</code> with three parameters:</p>
<ul>
<li><code>-s:&lt;source.xml.file&gt;</code></li>
<li><code>-xsl:&lt;xsl.transformations.file&gt;</code></li>
<li><code>-o:&lt;generated.svg.file&gt;</code></li>
</ul>
<p>To ease the process, I create the <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/diagram2svg.bat"  target="_blank" rel="noopener"
    >diagram2svg.bat</a> file, where I provide the path to the Saxon executables (<code>set SAXONPATH=D:\tools\SaxonHE9.9N\bin</code>) and all the commands to produce SVG files, like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl"><span class="nv">%SAXONPATH%</span>\Transform -s:Sample2.xml -xsl:package2svg.xsl -o:Sample2.svg
</span></span></code></pre></div><h2 id="the-beginnings">The beginnings
</h2><p>When I started to prepare the XSLT transformations, I used the Beginning.xml file and prepared the package2svg.xsl file. But not everything wanted to work, so I took a few steps back and started slowly. First - I created a blank SVG file - <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/00.svg"  target="_blank" rel="noopener"
    >00.svg</a> - just to be sure that I remember how to draw a simple image. Then I took the <code>&lt;NodeLayout&gt;</code> element and put it directly inside the <code>&lt;Objects&gt;</code> to test a simple XSLT transformation. I tested it with the <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/01.xml"  target="_blank" rel="noopener"
    >01.xml</a> and <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/01.xsl"  target="_blank" rel="noopener"
    >01.xsl</a> files.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- First try: pretend, that NodeLayout is the first element under the root --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;Objects</span> <span class="na">Version=</span><span class="s">&#34;sql11&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;NodeLayout</span> <span class="na">Size=</span><span class="s">&#34;179,42&#34;</span> <span class="na">Id=</span><span class="s">&#34;Package\\SQL Create table test&#34;</span> <span class="na">TopLeft=</span><span class="s">&#34;5.50000000000003,5.5&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/Objects&gt;</span>
</span></span></code></pre></div><p>XSLT processing is as follows:</p>
<ul>
<li><code>xsl:stylesheet</code> is 1.0 version (for a start it&rsquo;s enough)</li>
<li><code>xsl:output</code> is indented XML</li>
<li><code>xsl:template match=&quot;/Objects&quot;</code> finds the root element (<code>Objects</code>) of the XML file and prepares the root element of the SVG file; I make the SVG 2.0 version, so I use just the minimum declaration</li>
<li>inside the root element I <code>xsl:apply-templates</code> for the <code>NodeLayout</code> (it&rsquo;s just below the <code>Objects)</code></li>
<li>to draw the node I use the <code>&lt;rect&gt;</code> tag and pass all its attributes as <code>xsl:attribute</code>, because I want to evaluate the expressions</li>
<li>the <code>x</code> and <code>y</code> coordinates are stored inside the <code>TopLeft</code> attribute, and the <code>width</code> and <code>height</code>are inside the <code>Size</code>; they are separated by a comma, so I use <code>substring-before()</code> and <code>substring-after()</code> XSLT functions to get them; the SSIS package starts its coordinate system just like the SVG in the upper left corner of the screen, so I don&rsquo;t have to do sophisticated calculations</li>
<li>I draw the node using light grey colour (<code>fill</code>) with a black border (<code>stroke</code>) of 1px width (<code>stroke-width</code>) and round the corners using 10px measure (<code>rx</code> and <code>ry</code>); a side note - if you don&rsquo;t specify the measure units in SVG <a class="link" href="http://tutorials.jenkov.com/svg/svg-coordinate-system.html#coordinate-system-units"  target="_blank" rel="noopener"
    >it&rsquo;s assumed to be pixels</a></li>
<li>I have a habit that all the SVG elements created with XSLT are grouped using the <code>&lt;g&gt;</code> tag, even if the group contains just one object; it also helps me to deal with the namespaces</li>
<li>the essential part of the template is to use the proper namespace, that&rsquo;s why the full element is <code>&lt;g **xmlns=&quot;http://www.w3.org/2000/svg&quot;**&gt;</code> - if I don&rsquo;t use the namespace, the SVG file will have <code>&lt;g xmlns=&quot;&quot;&gt;</code> as the outcome and will not draw the node</li>
<li>the <code>&lt;g&gt;</code> tag as a wrapper also has an advantage - I specify the namespace only for the one element (in another case I would have to write it for all of them within the <code>xsl:template</code>)</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xslt" data-lang="xslt"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">xsl:stylesheet</span> <span class="na">version</span><span class="o">=</span><span class="s">&#34;1.0&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="na">xmlns:xsl</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/1999/XSL/Transform&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">xsl:output</span>
</span></span><span class="line"><span class="cl">      <span class="na">method</span><span class="o">=</span><span class="s">&#34;xml&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="na">encoding</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="na">indent</span><span class="o">=</span><span class="s">&#34;yes&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;/Objects&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">svg</span>
</span></span><span class="line"><span class="cl">      <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/2000/svg&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="na">viewBox </span><span class="o">=</span> <span class="s">&#34;0 0 1000 600&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;NodeLayout&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;NodeLayout&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">g</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/2000/svg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">rect</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;x&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-before(@TopLeft, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;y&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-after(@TopLeft, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;rx&#34;</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;ry&#34;</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;width&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-before(@Size, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;height&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-after(@Size, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;fill&#34;</span><span class="p">&gt;</span>lightgray<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;stroke&#34;</span><span class="p">&gt;</span>black<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;stroke-width&#34;</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">rect</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">g</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">xsl:stylesheet</span><span class="p">&gt;</span>
</span></span></code></pre></div><h2 id="the-next-step">The next step
</h2><p>I can draw the node from the XML document with one level of nesting. But in reality, it has four levels: <code>/Objects/Package/GraphInfo/LayoutInfo/NodeLayout</code> with a <code>&lt;GraphLayout&gt;</code> tag having different namespace(s). Working with namespaces is hard in the beginning, so the next step is to draw the same node, but with four levels of nesting. The example is in the <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/02.xml"  target="_blank" rel="noopener"
    >02.xml</a> and <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/02.xsl"  target="_blank" rel="noopener"
    >02.xsl</a> files.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;Objects</span> <span class="na">Version=</span><span class="s">&#34;sql11&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;Package&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;LayoutInfo&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;GraphLayout&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;NodeLayout</span> <span class="na">Size=</span><span class="s">&#34;179,42&#34;</span> <span class="na">Id=</span><span class="s">&#34;Package\\SQL Create table test&#34;</span> <span class="na">TopLeft=</span><span class="s">&#34;5.50000000000003,5.5&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/GraphLayout&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/LayoutInfo&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/Package&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/Objects&gt;</span>
</span></span></code></pre></div><p>The 02.xsl transformation file has two differences when compared to 01.xsl:</p>
<ul>
<li>the root node now uses <code>xsl:apply-templates</code> to call the <code>Package</code>template</li>
<li>all the descendant nodes call the templates of the child nodes - <code>Package</code> calls <code>LayoutInfo</code>, <code>LayoutInfo</code> calls <code>GraphLayout</code>, and <code>GraphLayout</code> calls <code>NodeLayout</code></li>
<li>the same result I can achieve using <code>xsl:apply-templates=&quot;Package/LayoutInfo/GraphLayout/NodeLayout</code> and <code>xsl:template-match=&quot;Package/LayoutInfo/GraphLayout/NodeLayout&quot;</code> (as in <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/02a.xsl"  target="_blank" rel="noopener"
    >02a.xsl</a> file), but I may want to decorate the intermediate elements, so I use this construction</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xslt" data-lang="xslt"><span class="line"><span class="cl">(...)
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;Package&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">(...)
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;Package&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;LayoutInfo&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;LayoutInfo&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;GraphLayout&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;GraphLayout&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;NodeLayout&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>Now to the namespace part. The <code>&lt;GraphLayout&gt;</code>item looks like this (skipping the <code>Capacity</code> attribute):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;GraphLayout</span>
</span></span><span class="line"><span class="cl">    <span class="na">xmlns=</span><span class="s">&#34;clr-namespace:Microsoft.SqlServer.IntegrationServices.Designer.Model.Serialization;assembly=Microsoft.SqlServer.IntegrationServices.Graph&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">xmlns:mssgle=</span><span class="s">&#34;clr-namespace:Microsoft.SqlServer.Graph.LayoutEngine;assembly=Microsoft.SqlServer.Graph&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">xmlns:assembly=</span><span class="s">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&gt;</span>
</span></span></code></pre></div><p>To generate the correct SVG, I have to do two things:</p>
<ul>
<li>add the namespace(s) used in <code>&lt;GraphLayout&gt;</code> to the xsl file</li>
<li>use the namespace in the templates</li>
</ul>
<p>Take a look at the <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/03.xsl"  target="_blank" rel="noopener"
    >03.xsl</a> file:</p>
<ul>
<li>the default namespace of the <code>&lt;GraphLayout&gt;</code> tag has to be added to the <code>xsl:stylesheet</code> declaration and prefixed to use it later; I chose the <code>gl</code> prefix; I can skip the remaining namespaces <code>mssgle</code> and <code>assembly</code> as I don&rsquo;t use them in the <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/03.xml"  target="_blank" rel="noopener"
    >03.xml</a> example</li>
<li>the <code>gl</code> name has to be used in the <code>GraphLayout</code> template and all its descendants</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xslt" data-lang="xslt"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">xsl:stylesheet</span> <span class="na">version</span><span class="o">=</span><span class="s">&#34;1.0&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="na">xmlns:xsl</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/1999/XSL/Transform&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="err">**</span><span class="na">xmlns:gl</span><span class="o">=</span><span class="s">&#34;clr-namespace:Microsoft.SqlServer.IntegrationServices.Designer.Model.Serialization;assembly=Microsoft.SqlServer.IntegrationServices.Graph&#34;</span><span class="err">**</span>
</span></span><span class="line"><span class="cl"><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">(...)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;LayoutInfo&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;**gl:GraphLayout**&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;**gl:GraphLayout**&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;**gl:NodeLayout**&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;**gl:NodeLayout**&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">(...)
</span></span></code></pre></div><h2 id="the-drawing">The drawing
</h2><p>Having all the preparation steps completed, I can now draw the Beginning.xml part of the package. I use the <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/package2svg.xsl"  target="_blank" rel="noopener"
    >package2svg.xsl</a> that contains the previously learnt things and expand it with the new elements:</p>
<ul>
<li>the <code>gl:GraphLayout contains `gl:NodeLayout`, `gl:EdgeLayout` and `gl:AnnotationLayout` </code></li>
<li>I want to display the names of the nodes (they are stored as the last part of the path in the <code>Id</code> attribute of the <code>NodeLayout</code>), so I use the <code>&lt;text&gt;</code> element</li>
<li>I position the text inside the node, that&rsquo;s why I add 5 pixels to the <code>x</code> position and calculate about the half of the height of the node for the <code>y</code> position and add about half the height of the font (all based on trial-and-error, I will make it more dynamic later)</li>
<li>To use the calculations, I have to cast the values to <code>number()</code>s</li>
<li>to get the last element of the path, I use the <code>tokenize()</code> function on the <code>Id</code> attribute providing the backslash (escaped) as the separator and save the result to the <code>xsl:variable</code> <code>nodeNameTokens</code></li>
<li>the <code>nodeNameTokens</code> holds the collection, and I&rsquo;m interested only in the last element of it, so I use <code>$nodeNameTokens[last()]</code> for the description of the node</li>
<li>the <code>tokenize()</code> function is available since XSLT 2.0, so I have to change the declaration of the xsl file to <code>xsl:stylesheet version=&quot;2.0&quot;</code></li>
<li>I want to have a light grey background of the image, so I use the trick with <code>&lt;rect width=&quot;100%&quot; height=&quot;100%&quot;&gt;</code> on the whole surface</li>
<li>to draw the edges, I use the <code>&lt;line&gt;</code> tag in the <code>gl:EdgeLayout</code> template; it&rsquo;s a simple package with the straight lines, so I don&rsquo;t care about the drawing the curves</li>
<li>the <code>(x1, y1)</code> and <code>(x2, y2)</code> coordinates are calculated using the <code>TopLeft</code> attribute of the <code>EdgeLayout</code> and the <code>End</code> attribute of the <code>mssgle:Curve</code> (I also added this namespace to the <code>xsl:stylesheet</code> declaration)</li>
<li>the lines of the edges don&rsquo;t connect the elements, so I add the little triangle at the end using the <code>&lt;polygon&gt;</code></li>
<li>the triangle&rsquo;s sides are calculated using the ends of the edges (<code>mssgle:Curve/@End</code>) and the connectors (<code>mssgle:Curve/@EndConnector</code>)</li>
<li>the <code>&lt;polygon&gt;</code> element has the points attribute, where I have to provide the coordinates of the points <code>x,y</code> separated by a space (like: <code>&lt;polygon points=&quot;10,10 10,15 15,15&quot; /&gt;</code>), so I use <code>&lt;xsl:text&gt; &lt;/xsl:text&gt;</code> to put a space between the calculated positions</li>
<li>the <code>AnnotationElement</code> is drawn similarly to the <code>NodeElement</code> with an additional border around it (to see that the rectangle exists); compared to the original package there is a room for improvement in the text positioning</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xslt" data-lang="xslt"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">xsl:stylesheet</span> <span class="err">**</span><span class="na">version</span><span class="o">=</span><span class="s">&#34;2.0&#34;</span><span class="err">**</span>
</span></span><span class="line"><span class="cl">  <span class="na">xmlns:xsl</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/1999/XSL/Transform&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="na">xmlns:gl</span><span class="o">=</span><span class="s">&#34;clr-namespace:Microsoft.SqlServer.IntegrationServices.Designer.Model.Serialization;assembly=Microsoft.SqlServer.IntegrationServices.Graph&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="na">xmlns:mssgle</span><span class="o">=</span><span class="s">&#34;clr-namespace:Microsoft.SqlServer.Graph.LayoutEngine;assembly=Microsoft.SqlServer.Graph&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">xsl:output</span>
</span></span><span class="line"><span class="cl">      <span class="na">method</span><span class="o">=</span><span class="s">&#34;xml&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="na">encoding</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="na">indent</span><span class="o">=</span><span class="s">&#34;yes&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;/Objects&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">svg</span>
</span></span><span class="line"><span class="cl">      <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/2000/svg&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="na">viewBox </span><span class="o">=</span> <span class="s">&#34;0 0 600 600&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">rect</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;100%&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;100%&#34;</span> <span class="na">fill</span><span class="o">=</span><span class="s">&#34;lightgray&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;Package&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;Package&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;LayoutInfo&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;LayoutInfo&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;gl:GraphLayout&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;gl:GraphLayout&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;gl:NodeLayout&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;gl:EdgeLayout&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:apply-templates</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;gl:AnnotationLayout&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;gl:NodeLayout&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">xsl:variable</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;**nodeNameTokens**&#34;</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;tokenize(@Id, &#39;\\&#39;)&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">g</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/2000/svg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">rect</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;x&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-before(@TopLeft, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;y&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-after(@TopLeft, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;rx&#34;</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;ry&#34;</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;width&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-before(@Size, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;height&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-after(@Size, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;fill&#34;</span><span class="p">&gt;</span>white<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;stroke&#34;</span><span class="p">&gt;</span>black<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;stroke-width&#34;</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">rect</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;x&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-before(@TopLeft, &#39;,&#39;)) + 5&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;y&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-after(@TopLeft, &#39;,&#39;)) + (number(substring-after(@Size, &#39;,&#39;)) div 2) + 7&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;fill&#34;</span><span class="p">&gt;</span>black<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;font-family&#34;</span><span class="p">&gt;</span>Verdana<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;font-size&#34;</span><span class="p">&gt;</span>12<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;$nodeNameTokens\[last()\]&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">g</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;gl:EdgeLayout&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">g</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/2000/svg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">line</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;x1&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-before(@TopLeft, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;y1&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-after(@TopLeft, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;style&#34;</span><span class="p">&gt;</span>stroke:#006600<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;x2&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-before(@TopLeft, &#39;,&#39;)) + number(substring-before(gl:EdgeLayout.Curve/mssgle:Curve/@End, &#39;,&#39;))&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;y2&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-after(@TopLeft, &#39;,&#39;)) + number(substring-after(gl:EdgeLayout.Curve/mssgle:Curve/@End, &#39;,&#39;))&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">line</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">polygon</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;points&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-before(@TopLeft, &#39;,&#39;)) + number(substring-before(gl:EdgeLayout.Curve/mssgle:Curve/@End, &#39;,&#39;)) - 3&#34;</span><span class="p">/&gt;</span>,<span class="p">&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-after(@TopLeft, &#39;,&#39;)) + number(substring-after(gl:EdgeLayout.Curve/mssgle:Curve/@End, &#39;,&#39;))&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">xsl:text</span><span class="p">&gt;</span> <span class="p">&lt;/</span><span class="nt">xsl:text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-before(@TopLeft, &#39;,&#39;)) + number(substring-before(gl:EdgeLayout.Curve/mssgle:Curve/@End, &#39;,&#39;)) + 3&#34;</span><span class="p">/&gt;</span>,<span class="p">&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-after(@TopLeft, &#39;,&#39;)) + number(substring-after(gl:EdgeLayout.Curve/mssgle:Curve/@End, &#39;,&#39;))&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">xsl:text</span><span class="p">&gt;</span> <span class="p">&lt;/</span><span class="nt">xsl:text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-before(@TopLeft, &#39;,&#39;)) + number(substring-before(gl:EdgeLayout.Curve/mssgle:Curve/@EndConnector, &#39;,&#39;))&#34;</span><span class="p">/&gt;</span>,<span class="p">&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-after(@TopLeft, &#39;,&#39;)) + number(substring-after(gl:EdgeLayout.Curve/mssgle:Curve/@EndConnector, &#39;,&#39;))&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;style&#34;</span><span class="p">&gt;</span>stroke:#006600; fill:#006600<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">polygon</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">g</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">xsl:template</span> <span class="na">match</span><span class="o">=</span><span class="s">&#34;gl:AnnotationLayout&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">g</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/2000/svg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;x&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-before(@TopLeft, &#39;,&#39;))&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;y&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;number(substring-after(@TopLeft, &#39;,&#39;)) + (number(substring-after(@Size, &#39;,&#39;)) div 2)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;fill&#34;</span><span class="p">&gt;</span>black<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;font-family&#34;</span><span class="p">&gt;</span>Verdana<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;font-size&#34;</span><span class="p">&gt;</span>12<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;@Text&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">rect</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;x&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-before(@TopLeft, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;y&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-after(@TopLeft, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;width&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-before(@Size, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;height&#34;</span><span class="p">&gt;&lt;</span><span class="nt">xsl:value-of</span> <span class="na">select</span><span class="o">=</span><span class="s">&#34;substring-after(@Size, &#39;,&#39;)&#34;</span><span class="p">/&gt;&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;fill&#34;</span><span class="p">&gt;</span>none<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;stroke&#34;</span><span class="p">&gt;</span>black<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">xsl:attribute</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;stroke-width&#34;</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">xsl:attribute</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">rect</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">g</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">xsl:template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">xsl:stylesheet</span><span class="p">&gt;</span>
</span></span></code></pre></div><h2 id="the-result">The result
</h2><p><a class="link" href="images/GeneratedSVG.png" >
  
  <p style="text-align: center;">
    <img src="images/GeneratedSVG.png"
	
	
	
	loading="lazy"
	
		alt="Generated SVG"
	
	
>
  </p>

</a></p>
<p><a class="link" href="images/SSISPackage.png" >
  
  <p style="text-align: center;">
    <img src="images/SSISPackage.png"
	
	
	
	loading="lazy"
	
		alt="SSIS Package"
	
	
>
  </p>

</a></p>
<p>The current drawing does not look as nice as the original SSIS, but hey - it&rsquo;s the same layout! So, let&rsquo;s draw something more complicated - the sequences with the elements aligned horizontally, vertically, with split paths:</p>
<p><a class="link" href="images/SequencesExample.png" >
  
  <p style="text-align: center;">
    <img src="images/SequencesExample.png"
	
	
	
	loading="lazy"
	
		alt="SSIS sequence example"
	
	
>
  </p>

</a></p>
<p>The plan of the image is stored in the <a class="link" href="https://github.com/BartekR/blog/blob/master/201907%20Draw%20SSIS%20package%20using%20SVG%20part%20I/Sample2.xml"  target="_blank" rel="noopener"
    >Sample2.xml</a> file. When I run the transformation using diagram2svg.xsl file I get the following:</p>
<p><a class="link" href="images/UnexpectedSample2.png" >
  
  <p style="text-align: center;">
    <img src="images/UnexpectedSample2.png"
	
	
	
	loading="lazy"
	
		alt="Unexpected sample"
	
	
>
  </p>

</a></p>
<p>No sequences, some elements are hidden, no path annotations. A mess. I knew I did not implement all the features, but I wanted to see the aligned nodes. Well, not this time. Adding the sequence objects, curved arrows and cleaning the XSLT, to get a picture below is a subject for the next part of the series.</p>
<p><a class="link" href="images/ExpectedSample.png" >
  
  <p style="text-align: center;">
    <img src="images/ExpectedSample.png"
	
	
	
	loading="lazy"
	
		alt="Expected sample"
	
	
>
  </p>

</a></p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/ssis/">SSIS</a>
        
            <a href="/tags/svg/">SVG</a>
        
            <a href="/tags/xml/">XML</a>
        
            <a href="/tags/xslt/">XSLT</a>
        
    </section>


    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/2017/07/26/learning-something-new-getting-information-from-ssis-packages-with-powershell/">
        
        

        <div class="article-details">
            <h2 class="article-title">Learning something new: getting information from SSIS packages with PowerShell</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/2018/08/13/writing-ssisunit-test-using-api/">
        
        
            <div class="article-image">
                
                    <img src="/2018/08/13/writing-ssisunit-test-using-api/images/ssisUnitAPI.png" loading="lazy" data-key="" data-hash="/2018/08/13/writing-ssisunit-test-using-api/images/ssisUnitAPI.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Writing ssisUnit test using API</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/2018/07/10/testing-the-loops-in-ssisunit/">
        
        
            <div class="article-image">
                
                    <img src="/2018/07/10/testing-the-loops-in-ssisunit/images/TheForLoopTest.png" loading="lazy" data-key="" data-hash="/2018/07/10/testing-the-loops-in-ssisunit/images/TheForLoopTest.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Testing the loops in ssisUnit</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/2018/07/05/setting-package-references-in-ssisunit/">
        
        
            <div class="article-image">
                
                    <img src="/2018/07/05/setting-package-references-in-ssisunit/images/StorageType_MSDB.png" loading="lazy" data-key="" data-hash="/2018/07/05/setting-package-references-in-ssisunit/images/StorageType_MSDB.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Setting package references in ssisUnit</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/2018/05/31/using-cached-datasets-in-ssisunit/">
        
        
            <div class="article-image">
                
                    <img src="/2018/05/31/using-cached-datasets-in-ssisunit/images/PersistedDatasetInSsisUnitFile.png" loading="lazy" data-key="" data-hash="/2018/05/31/using-cached-datasets-in-ssisunit/images/PersistedDatasetInSsisUnitFile.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Using cached datasets in ssisUnit</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="BartekR/bartekr.github.io"
        issue-term="url"
        
        label="blog-comment"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2017 - 
        
        2024 BartekR
    </section>
    
    <section class="powerby">
        
            (c) Bartosz Ratajczyk <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
